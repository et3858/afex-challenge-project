<script setup lang="ts">
import { VueFinalModal } from 'vue-final-modal';
import VideoPlayer from "./../VideoPlayer.vue";

import type { Video } from "./../../types";


interface IProps {
    title?: string,
    video: Video,
};


const props = defineProps<IProps>();


const emit = defineEmits<{
    (e: 'confirm'): void
}>();

console.log(props.video)
</script>

<template>
    <VueFinalModal
        class="confirm-modal"
        content-class="confirm-modal-content"
        overlay-transition="vfm-fade"
        content-transition="vfm-fade"
    >
        <span class="close-modal" @click="emit('confirm')">
            <svg xmlns="http://www.w3.org/2000/svg" width="27" height="23" viewBox="0 0 27 23" fill="none">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M3.12582 2.42214C2.91193 2.24748 2.59695 2.27927 2.42229 2.49316C2.24762 2.70704 2.27942 3.02203 2.4933 3.19669L12.7275 11.5542L2.49284 19.9122C2.27895 20.0868 2.24716 20.4018 2.42182 20.6157C2.59649 20.8296 2.91147 20.8614 3.12536 20.6867L13.518 12.1998L23.9107 20.6867C24.1246 20.8614 24.4396 20.8296 24.6142 20.6157C24.7889 20.4018 24.7571 20.0868 24.5432 19.9122L14.3085 11.5542L24.5428 3.19669C24.7566 3.02203 24.7884 2.70704 24.6138 2.49316C24.4391 2.27927 24.1241 2.24748 23.9102 2.42214L13.518 10.9087L3.12582 2.42214Z" fill="#020202"/>
                <path d="M2.42229 2.49316L1.26046 1.54439L1.26046 1.54439L2.42229 2.49316ZM3.12582 2.42214L4.07459 1.26032L4.07459 1.26032L3.12582 2.42214ZM2.4933 3.19669L3.44208 2.03487L3.44208 2.03487L2.4933 3.19669ZM12.7275 11.5542L13.6763 12.7161L15.099 11.5542L13.6763 10.3924L12.7275 11.5542ZM2.49284 19.9122L1.54407 18.7504H1.54407L2.49284 19.9122ZM2.42182 20.6157L3.58364 19.6669L3.58364 19.6669L2.42182 20.6157ZM3.12536 20.6867L4.07413 21.8485H4.07413L3.12536 20.6867ZM13.518 12.1998L14.4668 11.038L13.518 10.2632L12.5693 11.038L13.518 12.1998ZM23.9107 20.6867L22.9619 21.8486L23.9107 20.6867ZM24.6142 20.6157L23.4524 19.6669L23.4524 19.6669L24.6142 20.6157ZM24.5432 19.9122L25.492 18.7504L24.5432 19.9122ZM14.3085 11.5542L13.3597 10.3924L11.937 11.5542L13.3597 12.7161L14.3085 11.5542ZM24.5428 3.19669L23.594 2.03487L23.594 2.03487L24.5428 3.19669ZM24.6138 2.49316L25.7756 1.54439L25.7756 1.54438L24.6138 2.49316ZM23.9102 2.42214L24.859 3.58396L24.859 3.58396L23.9102 2.42214ZM13.518 10.9087L12.5693 12.0705L13.518 12.8453L14.4668 12.0705L13.518 10.9087ZM3.58411 3.44193C3.23478 3.8697 2.60481 3.93329 2.17704 3.58397L4.07459 1.26032C3.21905 0.561666 1.95912 0.688844 1.26046 1.54439L3.58411 3.44193ZM3.44208 2.03487C3.86985 2.3842 3.93343 3.01416 3.58411 3.44193L1.26046 1.54439C0.561807 2.39993 0.688985 3.65985 1.54453 4.35851L3.44208 2.03487ZM13.6763 10.3924L3.44208 2.03487L1.54453 4.35851L11.7788 12.7161L13.6763 10.3924ZM3.44161 21.074L13.6763 12.7161L11.7788 10.3924L1.54407 18.7504L3.44161 21.074ZM3.58364 19.6669C3.93298 20.0947 3.86938 20.7247 3.44162 21.074L1.54407 18.7504C0.688531 19.449 0.561337 20.7089 1.26001 21.5645L3.58364 19.6669ZM2.17658 19.5249C2.60435 19.1756 3.23432 19.2392 3.58364 19.6669L1.26 21.5645C1.95866 22.42 3.21859 22.5472 4.07413 21.8485L2.17658 19.5249ZM12.5693 11.038L2.17658 19.5249L4.07413 21.8485L14.4668 13.3616L12.5693 11.038ZM24.8595 19.5249L14.4668 11.038L12.5693 13.3616L22.9619 21.8486L24.8595 19.5249ZM23.4524 19.6669C23.8017 19.2392 24.4317 19.1756 24.8595 19.5249L22.9619 21.8486C23.8175 22.5472 25.0774 22.42 25.7761 21.5645L23.4524 19.6669ZM23.5944 21.074C23.1667 20.7247 23.1031 20.0947 23.4524 19.6669L25.7761 21.5645C26.4747 20.7089 26.3475 19.449 25.492 18.7504L23.5944 21.074ZM13.3597 12.7161L23.5944 21.074L25.492 18.7504L15.2573 10.3924L13.3597 12.7161ZM23.594 2.03487L13.3597 10.3924L15.2573 12.7161L25.4915 4.35851L23.594 2.03487ZM23.452 3.44193C23.1026 3.01416 23.1662 2.3842 23.594 2.03487L25.4915 4.35851C26.3471 3.65985 26.4742 2.39992 25.7756 1.54439L23.452 3.44193ZM24.859 3.58396C24.4312 3.9333 23.8013 3.8697 23.452 3.44194L25.7756 1.54438C25.0769 0.688848 23.817 0.561662 22.9615 1.26033L24.859 3.58396ZM14.4668 12.0705L24.859 3.58396L22.9615 1.26032L12.5693 9.74689L14.4668 12.0705ZM2.17704 3.58396L12.5693 12.0705L14.4668 9.74689L4.07459 1.26032L2.17704 3.58396Z" fill="#020202"/>
            </svg>
        </span>


        <div class="details-container">
            <div class="video-thumbnail">
                <!--

                <img :src="props.video.thumbnails.maxres.url" :alt="props.video.title" />

                <svg width="62" height="65" viewBox="0 0 62 65" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g filter="url(#filter0_d_1_1423)">
                        <ellipse cx="31" cy="28.5" rx="27" ry="28.5" fill="white"/>
                        <path d="M31 0C16.0847 0 4 12.756 4 28.5C4 44.2439 16.0847 57 31 57C45.9153 57 58 44.2439 58 28.5C58 12.756 45.9153 0 31 0ZM43.5964 31.2581L24.4351 42.8649C22.7149 43.8762 20.5484 42.5776 20.5484 40.4516V16.5484C20.5484 14.4339 22.704 13.1238 24.4351 14.1351L43.5964 26.4314C45.3819 27.4887 45.3819 30.2123 43.5964 31.2581Z" fill="#FF0000"/>
                    </g>
                    <defs>
                        <filter id="filter0_d_1_1423" x="0" y="0" width="62" height="65" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                            <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                            <feOffset dy="4"/>
                            <feGaussianBlur stdDeviation="2"/>
                            <feComposite in2="hardAlpha" operator="out"/>
                            <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
                            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1_1423"/>
                            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1_1423" result="shape"/>
                        </filter>
                    </defs>
                </svg>
                -->

                <VideoPlayer :id="video.youtube_video_id" :title="video.title" />
            </div>

            <div class="video-info">
                <h1>{{ props.video.title }}</h1>

                {{ props.video.description }}
            </div>
        </div>
    </VueFinalModal>
</template>

<style>
.details-container {
    display: flex;
    gap: 16px;
    flex-flow: wrap;
}


.video-thumbnail {
    background-color: gray;
    flex-shrink: 0;
    height: 308px;
    position: relative;
    width: 492px;
}

.video-thumbnail img {
    height: 100%;
    width: 100%;
}

.video-thumbnail svg {
    bottom: 0;
    left: 0;
    margin: auto;
    position: absolute;
    right: 0;
    top: 0;
}

.video-info {
    height: 300px;
    max-width: 600px;
    min-width: 300px;
    overflow: auto;
    white-space: pre-wrap;
}


.confirm-modal {
    align-items: center;
    display: flex;
    justify-content: center;
}

.confirm-modal-content {
    background: #fff;
    border-radius: 0.5rem;
    display: flex;
    flex-direction: column;
    padding: 1rem;
    position: relative;
}



.confirm-modal-content .close-modal {
    cursor: pointer;
    position: absolute;
    right: 32px;
    top: 37px;
}

.confirm-modal-content > * + * {
    margin: 0.5rem 0;
}

.confirm-modal-content h1 {
    font-size: 1.375rem;
}

.confirm-modal-content button {
    border-radius: 0.5rem;
    border: 1px solid;
    margin: 0.25rem 0 0 auto;
    padding: 0 8px;
}
</style>
